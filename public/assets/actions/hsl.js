/*
 * Pixastic Lib - HSL Adjust  - v0.1.1
 * Copyright (c) 2008 Jacob Seidelin, jseidelin@nihilogic.dk, http://blog.nihilogic.dk/
 * License: [http://www.pixastic.com/lib/license.txt]
 */
Pixastic.Actions.hsl={process:function(e){var t=parseInt(e.options.hue,10)||0,n=(parseInt(e.options.saturation,10)||0)/100,r=(parseInt(e.options.lightness,10)||0)/100;if(n<0)var i=1+n;else var i=1+n*2;t=t%360/360;var s=t*6,o=1/255,u=r*255,a=1+r,f=1-r;if(Pixastic.Client.hasCanvasImageData()){var l=Pixastic.prepareData(e),c=e.options.rect,h=c.width*c.height,p=h*4,d=p+1,v=p+2,m=p+3;while(h--){var g=l[p-=4],y=l[d=p+1],b=l[v=p+2];if(t!=0||n!=0){var w=g;y>w&&(w=y),b>w&&(w=b);var E=g;y<E&&(E=y),b<E&&(E=b);var S=w-E,x=(E+w)/510;if(x>0&&S>0){if(x<=.5){var T=S/(w+E)*i;T>1&&(T=1);var N=x*(1+T)}else{var T=S/(510-w-E)*i;T>1&&(T=1);var N=x+T-x*T}if(g==w)if(y==E)var C=5+(w-b)/S+s;else var C=1-(w-y)/S+s;else if(y==w)if(b==E)var C=1+(w-g)/S+s;else var C=3-(w-b)/S+s;else if(g==E)var C=3+(w-y)/S+s;else var C=5-(w-g)/S+s;C<0&&(C+=6),C>=6&&(C-=6);var k=x+x-N,L=C>>0;L==0?(g=N*255,y=(k+(N-k)*(C-L))*255,b=k*255):L==1?(g=(N-(N-k)*(C-L))*255,y=N*255,b=k*255):L==2?(g=k*255,y=N*255,b=(k+(N-k)*(C-L))*255):L==3?(g=k*255,y=(N-(N-k)*(C-L))*255,b=N*255):L==4?(g=(k+(N-k)*(C-L))*255,y=k*255,b=N*255):L==5&&(g=N*255,y=k*255,b=(N-(N-k)*(C-L))*255)}}r<0?(g*=a,y*=a,b*=a):r>0&&(g=g*f+u,y=y*f+u,b=b*f+u),g<0?l[p]=0:g>255?l[p]=255:l[p]=g,y<0?l[d]=0:y>255?l[d]=255:l[d]=y,b<0?l[v]=0:b>255?l[v]=255:l[v]=b}return!0}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}};